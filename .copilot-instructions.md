# GitHub Copilot Instructions for HueCue

## Project Overview

HueCue is a WPF application for viewing video files with real-time histogram overlays. It's built using modern .NET practices and patterns.

## Technology Stack

- **.NET 9.0** with WPF (`net9.0-windows`)
- **OpenCvSharp4** for video processing and computer vision
- **CommunityToolkit.Mvvm** for MVVM pattern implementation
- **Material Design in XAML** for UI theming
- **Microsoft.Extensions.Hosting** for dependency injection and application hosting
- **Velopack** for application updates and deployment
- **xUnit** with **Moq** for testing

## Architecture Guidelines

### MVVM Pattern
- Use `CommunityToolkit.Mvvm` attributes like `[ObservableProperty]` and `[RelayCommand]`
- ViewModels should inherit from `ObservableObject`
- Use dependency injection for services and ViewModels

### Dependency Injection
- The application uses `Microsoft.Extensions.Hosting` with `Host.CreateDefaultBuilder()`
- Services are configured in `App.xaml.cs` in the `CreateHostBuilder` method
- Use constructor injection for dependencies

### Centralized Package Management
- This project uses **Centralized Package Management**
- All package versions are managed in `Directory.Packages.props`
- Project files only reference packages by name, not version
- When adding new packages, add the version to `Directory.Packages.props` and reference in project files

## Critical Guidelines

### ðŸš¨ DO NOT Downgrade Target Framework Monikers (TFMs)
- **NEVER** downgrade the target framework from `net9.0-windows` to earlier versions
- Only suggest TFM upgrades when explicitly requested
- Maintain the current `net9.0-windows` target unless explicitly asked to change it

### ðŸš¨ DO NOT Downgrade NuGet Package Versions
- **NEVER** suggest downgrading package versions in `Directory.Packages.props`
- Only suggest package upgrades or security updates when appropriate
- If a specific package version is causing issues, suggest troubleshooting before downgrading
- Only downgrade packages when explicitly requested by the user

### Build Configuration
- Use the existing build configuration in `Directory.Build.props` and `Directory.Build.targets`
- Respect the `.editorconfig` formatting rules
- The project uses nullable reference types - maintain null safety

## Code Style Preferences

### C# Patterns
- Use modern C# features (pattern matching, record types, etc.)
- Prefer `async/await` for asynchronous operations
- Use nullable reference types appropriately
- Follow the existing code patterns in the project

### WPF Specific
- Use data binding and commands rather than code-behind event handlers
- Leverage Material Design themes and controls when adding UI elements
- Use converters for data transformation in XAML

### Testing
- Write unit tests for ViewModels and business logic
- Use `Moq.AutoMock` for dependency mocking in tests
- Follow the AAA pattern (Arrange, Act, Assert) in tests

## Video Processing Guidelines

- Use OpenCvSharp4 for video operations
- Be mindful of memory management with OpenCV objects (dispose properly)
- Performance considerations for real-time video processing
- Handle video format compatibility appropriately

## Deployment Considerations

- The application uses Velopack for updates
- Version is managed in `HueCue.csproj`
- Consider single-file publishing options when suggesting deployment changes

## File Structure

- Main application: `/HueCue/`
- Tests: `/HueCue.Tests/`
- Build configuration: Root level `.props` and `.targets` files
- Resources: `/HueCue/Resources/`

Remember: Always prioritize maintaining the current target framework and package versions unless explicitly requested to change them.